# Расхождение архитектур
* [Введение](#введение)
* [Компьютер Mark-1](#компьютер-mark-1)
* [Гарвардская архитектура](#гарвардская-архитектура)
* [Компьютер ENIAC](#компьютер-eniac)
* [Архитектура фон Неймана](#архитектура-фон-неймана)
* [Различие архитектур](#различие-архитектур)

## Введение
На предыдущих лекциях я тратил больше времени на биографию ученых, что интересно конкретно мне, но вряд ли имеет большую ценность в контексте уроков информатики. 
Так что впредь постараюсь делать акцент на разработках и технологиях, благо начиная с 1940-х информации про это больше, потому что мир постепенно пришел к тому, что поводов хвастаться своими разработками больше, чем поводов секретничать.

## Компьютер Mark-1
При подготовке я, как правило, начинаю со страницы в Википедии, прикольно что каждый из компьютеров, который я сегодня упомяну, называют "Первым компьютером". В том числе и этот.

### Сводка характеристик из Википедии
По настоянию президента IBM Томаса Дж. Уотсона, вложившего в создание «Марк I» 500 тысяч долларов, машина была заключена в корпус из стекла и нержавеющей стали. Компьютер содержал около 765 тысяч деталей (электромеханических реле, переключателей и т. п.), достигал в длину почти 17 м (машина занимала в Гарвардском университете площадь в несколько десятков квадратных метров), в высоту — более 2,5 м и весил около 4,5 тонны. Общая протяжённость соединительных проводов составляла почти 800 км. Основные вычислительные модули синхронизировались механически при помощи 15-метрового вала, приводившегося в движение электрическим двигателем мощностью в 5 л. с. (4 кВт).

Компьютер оперировал 72 числами, состоящими из 23 десятичных разрядов, делая по 3 операции сложения или вычитания в секунду. Умножение выполнялось в течение 6 секунд, деление — 15,3 секунды, на операции вычисления логарифмов и выполнение тригонометрических функций требовалось больше минуты.

Фактически «Марк I» представлял собой усовершенствованный арифмометр, заменявший труд примерно 20 операторов с обычными ручными устройствами, однако из-за наличия возможности программирования некоторые исследователи называют его первым реально работавшим компьютером. На самом деле, машина начала работать через два года после того, как в Германии немецкий изобретатель Конрад Цузе создал вычислительную машину Z3.

«Марк I» последовательно считывал и выполнял инструкции с перфорированной бумажной ленты. Компьютер не умел выполнять условные переходы, из-за чего каждая программа представляла собой довольно длинный ленточный рулон. Циклы (англ. loops — петли) организовывались за счёт замыкания начала и конца считываемой ленты (то есть действительно за счёт создания петель). Принцип разделения данных и инструкций получил известность, как гарвардская архитектура.

Однако главным отличием компьютера «Марк I» было то, что он был первой полностью автоматической вычислительной машиной, не требовавшей какого-либо вмешательства человека в рабочий процесс.

На церемонии передачи компьютера Говард Эйкен не упомянул о какой-либо роли IBM в создании машины. Томас Уотсон был разозлён и недоволен этим поступком Эйкена, поэтому прекратил их дальнейшее сотрудничество. Данное IBM название «Automatic Sequence Controlled Calculator» Эйкен, будучи старшим военно-морским офицером, заменил на стандартное наименование для вооружения и военной техники флота «Mark I» (то есть, первый образец из данной серии, поступивший на дежурство), а компания приступила к созданию нового компьютера «IBM SSEC» уже без участия Говарда Эйкена.

В свою очередь, Говард Эйкен также продолжил работу над созданием новых вычислительных машин. За «Марком I» последовал «Марк II», затем в сентябре 1949 года — «Марк III/ADEC», а в 1952 году — «Марк IV».

## Гарвардская архитектура
Компьютер Mark-1 был построен на так называемой Гарвардской архитектуре. Ее основными признаками считаются:
* хранилище инструкций и хранилище данных представляют собой разные физические устройства;
* канал инструкций и канал данных также физически разделены.

Типичные операции (сложение и умножение) требуют от любого вычислительного устройства нескольких действий:
* выборку двух операндов;
* выбор инструкции и её выполнение;
* сохранение результата.
  
Идея, реализованная Эйкеном, заключалась в физическом разделении линий передачи команд и данных. В первом компьютере Эйкена «Марк I» для хранения инструкций использовалась перфорированная лента, а для работы с данными — электромеханические регистры. Это позволяло одновременно пересылать и обрабатывать команды и данные, благодаря чему значительно повышалось общее быстродействие компьютера.

В гарвардской архитектуре характеристики устройств памяти для инструкций и памяти для данных не обязательно должны быть одинаковыми. В частности, ширина слова, тактирование, технология реализации и структура адресов памяти могут различаться. В некоторых системах инструкции могут храниться в памяти только для чтения, в то время как для сохранения данных обычно требуется память с возможностью чтения и записи. В некоторых системах требуется значительно больше памяти для инструкций, чем памяти для данных, поскольку данные обычно могут подгружаться с внешней или более медленной памяти. Такая потребность увеличивает битность (ширину) шины адреса памяти инструкций по сравнению с шиной адреса памяти данных.

## Компьютер ENIAC
Архитектуру компьютера начали разрабатывать в 1943 году Джон Преспер Эккерт и Джон Уильям Мокли, учёные из Пенсильванского университета (Электротехническая школа Мура), по заказу Лаборатории баллистических исследований[en] Армии США для расчётов таблиц стрельбы. В отличие от созданного в 1941 году немецким инженером Конрадом Цузе комплекса Z3, использовавшего механические реле, в ЭНИАКе в качестве основы элементной базы применялись электронные лампы.

Расчёты таблиц стрельбы в то время проводились вручную на настольных арифмометрах. Эту работу в лаборатории выполняли особые клерки — «вычислители» — в основном женщины. Таблицы стрельбы рассчитывались для каждого отдельного типа снаряда и орудия перед принятием на вооружение и при различных комбинациях множества параметров (возвышение ствола, номер заряда, скорость снаряда, скорость ветра, температура воздуха, давление воздуха, температура заряда) требовался кропотливый расчёт около 3000 траекторий полёта снаряда. Расчёт каждой траектории требовал примерно 1000 операций. Один вычислитель был способен выполнить этот расчет за 16 дней, а на вычисление всей таблицы потребовалось бы 4 года. Без этих таблиц артиллеристам просто невозможно было точно попасть в цель. В условиях Второй мировой войны на фронт в Европу отправлялось всё больше и больше орудий и снарядов к ним, в 1943 году союзные войска высадились в Африке, где условия стрельбы были несколько иные и требовали новых таблиц, а Лаборатория не справлялась со своевременным их расчётом.

В Институте Мура имелся один из немногих «дифференциальных анализаторов» — механический вычислитель, к помощи которого прибегала лаборатория для выполнения хотя бы части расчётов. В этом институте Мокли работал преподавателем, а Эккерт был простым студентом с незаурядными способностями инженера. В августе 1942 года Мокли написал 7-страничный документ «The Use of High-Speed Vacuum Tube Devices for Calculation», в котором предлагал Институту построить электронную вычислительную машину, основанную на электронных лампах. Руководство Института работу не оценило и сдало документ в архив, где он вообще был утерян.

Сотрудничество Института Мура с Баллистической лабораторией по вычислению таблиц стрельбы осуществлялось через капитана Германа Голдстайна, который до поступления на службу в армию работал профессором математики в Университете штата Мичиган. Лишь в начале 1943 года один из работников Института в случайной беседе сообщил Голдстайну об идее электронного вычислителя, с которой носился Мокли. Использование электронной вычислительной машины позволило бы лаборатории сократить время расчёта с нескольких месяцев до нескольких часов. Голдстайн встретился с Мокли и предложил ему обратиться с заявкой в лабораторию на выделение средств для постройки задуманной машины. Мокли по памяти восстановил утерянный 7-страничный документ с описанием проекта.

9 апреля 1943 года проект был представлен Баллистической лаборатории на заседании Комиссии по науке. В проекте машина называлась «электронный дифф. анализатор» (electronic diff. analyzer). Это была уловка, чтобы новизна проекта не вызвала отторжения у военных. Все они были уже знакомы с дифференциальным анализатором, и проект в их представлении просто предлагал сделать его не механическим, а электрическим. Проект обещал, что построенный компьютер будет вычислять одну траекторию за 5 минут.

После короткой презентации научный консультант комиссии Освальд Веблен одобрил идею, и деньги (61 700 долларов США на первые 6 месяцев исследовательских работ) были выделены. В контракте под номером W-670-ORD-4926, заключенном 5 июня 1943 года, машина называлась «Electronic Numerical Integrator» («Электронный числовой интегратор»), позднее к названию было добавлено «and Computer» («и компьютер»), в результате чего получилась знаменитая аббревиатура ENIAC. Куратором проекта «Project PX» со стороны Армии США выступил опять-таки Герман Голдстайн.

К февралю 1944 года были готовы все схемы и чертежи будущего компьютера, и группа инженеров под руководством Эккерта и Мокли приступила к воплощению замысла в «железо». В группу вошли также:
* Роберт Шоу (Robert F. Shaw) (функциональные таблицы)
* Джеффри Чуан Чу (Jeffrey Chuan Chu) (модуль деления/извлечения квадратного корня)
* Томас Кайт Шарплес (Thomas Kite Sharpless) (главный программист)
* Артур Бёркс (Arthur Burks) (модуль умножения)
* Гарри Хаски (модуль чтения выходных данных)
* Джек Дэви (Jack Davis) («аккумуляторы» — модули для сложения чисел)
* Джон фон Нейман — присоединился к проекту в сентябре 1944 года в качестве научного консультанта. На основе анализа недостатков ЭНИАКа внёс существенные предложения по созданию новой более совершенной машины — EDVAC. В середине июля 1944 года Мокли и Эккерт собрали два первых «аккумулятора» — модули, которые использовались для сложения чисел. Соединив их вместе, они перемножили два числа 5 и 1000 и получили верный результат. Этот результат был продемонстрирован руководству Института и Баллистической лаборатории и доказал всем скептикам, что электронный компьютер действительно может быть построен.

Компьютер был полностью готов лишь осенью 1945 года. Так как война к тому времени уже была закончена и острой необходимости в быстром расчёте таблиц стрельбы уже не было, военное ведомство США решило использовать ENIAC в расчётах по разработке термоядерного оружия.

Будучи сверхсекретным проектом Армии США, компьютер был представлен публике и прессе лишь много месяцев спустя после окончания войны — 14 февраля 1946 года. Через несколько месяцев — 9 ноября 1946 года — ENIAC был разобран и перевезён из Университета Пенсильвании в г. Абердин в Лабораторию баллистических исследований Армии США, где с 29 июля 1947 года он успешно проработал ещё много лет и был окончательно выключен 2 октября 1955 года в 23:45.

В Баллистической лаборатории на ENIAC выполнялись расчеты по проблеме термоядерного оружия, прогнозам погоды в СССР для предсказания направления выпадения ядерных осадков на случай ядерной войны, инженерные расчёты, и конечно же таблиц стрельбы, включая таблицы стрельбы ядерными боеприпасами.

Первыми программистами ЭНИАКа стали шесть девушек:
* Мэрлин Мельцер
* Рут Лихтерман
* Кэтлин Антонелли
* Бетти Джин Дженнингс
* Франсис Элизабет Снайдер
* Франсис Билас

## Архитектура фон Неймана
Архитектура фон Неймана имеет свои конкретные принципы:

### Принцип программного управления
Все вычисления, предусмотренные алгоритмом решения задачи, должны быть представлены в виде программы, состоящей из последовательности управляющих слов — команд (инструкций). Каждая команда предписывает некоторую операцию из фиксированного набора операций, реализуемых вычислительной машиной. Команды программы хранятся в последовательных ячейках памяти вычислительной машины и выполняются в естественной последовательности, то есть в порядке их положения в программе. При необходимости, с помощью специальных команд, эта последовательность может быть изменена. Решение об изменении порядка выполнения команд программы принимается либо на основании анализа результатов предшествующих вычислений, либо безусловно (по соответствующей команде).

### Принцип адресности
Структурно основная память состоит из пронумерованных ячеек, причём процессору в произвольный момент доступна любая ячейка. Двоичные коды команд и данных разделяются на единицы информации, называемые словами, и хранятся в ячейках памяти, а для доступа к ним используются номера соответствующих ячеек — адреса.

### Принцип однородности памяти
Команды и данные хранятся в одной и той же памяти и внешне в памяти неразличимы. Распознать их можно только по способу использования; то есть одно и то же значение в ячейке памяти может использоваться и как данные, и как команда, и как адрес в зависимости лишь от способа обращения к нему. Это позволяет производить над командами те же операции, что и над числами, и, соответственно, открывает ряд возможностей. Так, циклически изменяя адресную часть команды, можно обеспечить обращение к последовательным элементам массива данных. Такой приём носит название модификации команд и с позиций современного программирования не приветствуется. Более полезным является другое следствие принципа однородности, когда команды одной программы могут быть получены как результат исполнения другой программы. Эта возможность лежит в основе трансляции — перевода текста программы с языка высокого уровня на язык конкретной вычислительной машины.

## Различие архитектур
В архитектуре фон Неймана процессор в каждый момент времени может либо читать инструкцию, либо читать/записывать единицу данных из/в памяти. Оба действия одновременно происходить не могут, поскольку инструкции и данные используют один и тот же поток (шину).

В компьютере с использованием гарвардской архитектуры процессор может считывать очередную команду и оперировать памятью данных одновременно и без использования кэш-памяти. Таким образом, компьютер с гарвардской архитектурой при определенной сложности схемы быстрее, чем компьютер с архитектурой фон Неймана, поскольку потоки команд и данных расположены на раздельных физически не связанных между собой аппаратных каналах.

Исходя из физического разделения шин команд и данных, разрядности этих шин могут различаться и физически не могут пересекаться.

Гарвардская архитектура использовалась в 1970-х годах в процессорах Intel 4004 и Intel 8051. Использования архитектуры фон Неймана где-то, кроме компьютеров ENIAC и ему подобных.


